// Text Scramble Effect
// Credits: https://codepen.io/soulwire/pen/mEMPrK
class TextScramble{constructor(t){this.el=t,this.chars="!<>-_\\/[]{}â€”=+*^?#________",this.update=this.update.bind(this)}setText(t){const e=this.el.innerText,s=Math.max(e.length,t.length),h=new Promise((t=>this.resolve=t));this.queue=[];for(let h=0;h<s;h++){const s=e[h]||"",a=t[h]||"",r=Math.floor(40*Math.random()),i=r+Math.floor(40*Math.random());this.queue.push({from:s,to:a,start:r,end:i})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),h}update(){let t="",e=0;for(let s=0,h=this.queue.length;s<h;s++){let{from:h,to:a,start:r,end:i,char:n}=this.queue[s];this.frame>=i?(e++,t+=a):this.frame>=r?((!n||Math.random()<.28)&&(n=this.randomChar(),this.queue[s].char=n),t+=`<span class="dud">${n}</span>`):t+=h}this.el.innerHTML=t,e===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}
